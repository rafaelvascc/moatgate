$(function(){function u(n){return i.render(n)}function f(n){return r.render(n)}var n,t,i,r;$("#ddlRoles").chosen({width:"100%"});n=$("table").DataTable({rowId:"Id",processing:!0,serverSide:!0,searching:!0,ajax:{url:"../internal-api/users/search",type:"POST",data:function(n){var t=[{data:"lockoutEndFrom",name:"LockoutEndFrom",orderable:!0,search:{regex:!1,value:$("#txtFromLockoutEnd").val()},searchable:!0},{data:"lockoutEndTo",name:"LockoutEndTo",orderable:!0,search:{regex:!1,value:$("#txtToLockoutEnd").val()},searchable:!0},{data:"lockoutEnabled",name:"LockoutEnabled",orderable:!0,search:{regex:!1,value:$("#ddlLockoutEnabled").val()},searchable:!0},{data:"accessFailedCount",name:"AccessFailedCount",orderable:!0,search:{regex:!1,value:$("#numbFailedCount").val()},searchable:!0},];return n.columns.concat(t),n.Id=$("#txtId").val(),n.roles=$("#ddlRoles").val(),n}},columns:[{"class":"details-control text-center",orderable:!1,data:null,defaultContent:"<i class='fas fa-plus'><\/i>",searchable:!1,searching:!1},{data:"name",name:"Name",title:"Name",searchable:!0,searching:!0},{data:"user.userName",name:"UserName",title:"User Name",searchable:!0,searching:!0},{data:"user.email",name:"Email",title:"Email",searchable:!0,searching:!0},{data:"user.phoneNumber",name:"PhoneNumber",title:"Phone Number",searchable:!0,searching:!0},{"class":"actions-control",title:"Actions",orderable:!1,data:null,searchable:!1,searching:!1,width:"52px",render:function(n){return f(n.user)}},]});$("#btnSearch").on("click",function(){n.columns([1]).search($("#txtName").val()).columns([2]).search($("#txtUserName").val()).columns([3]).search($("#txtEmail").val()).columns([4]).search($("#txtPhoneNumber").val());n.draw()});t=[];n.on("click","tbody tr td.details-control",function(){var i=$(this).closest("tr"),r=n.row(i),f=$.inArray(i.attr("id"),t);r.child.isShown()?(i.find("i:first").addClass("fa-plus"),i.find("i:first").removeClass("fa-minus"),r.child.hide(),t.splice(f,1)):(i.find("i:first").removeClass("fa-plus"),i.find("i:first").addClass("fa-minus"),r.child(u(r.data())).show(),f===-1&&t.push(i.attr("id")))});n.on("draw",function(){$.each(t,function(n,t){$("#"+t+" td.details-control").trigger("click")})});i=$.templates("#user-details-template");r=$.templates("#user-actions-template")});